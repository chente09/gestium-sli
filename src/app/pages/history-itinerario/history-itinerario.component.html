<nz-table #itinerarioTable nzBordered [nzData]="itinerarios" nzTableLayout="fixed">
    <thead>
        <tr>
            <th nzWidth="10%">Área</th>
            <th nzWidth="10%">Juzgado</th>
            <th nzWidth="15%">Piso</th>
            <th nzWidth="15%">Trámite</th>
            <th nzWidth="15%">Solicita</th>
            <th nzWidth="15%">Fecha Solicitud</th>
            <th nzWidth="15%">Observaciones</th>
            <th nzWidth="10%">Acciones</th>
        </tr>
    </thead>
    <tbody *ngIf="itinerarios.length > 0">
        <tr *ngFor="let item of itinerarios; trackBy: trackById">
            <!-- Modo lectura -->
            <td *ngIf="!editCache[item.id]?.edit">{{ item.area }}</td>
            <td *ngIf="!editCache[item.id]?.edit">{{ item.juzgado }}</td>
            <td *ngIf="!editCache[item.id]?.edit">{{ item.piso }}</td>
            <td *ngIf="!editCache[item.id]?.edit">{{ item.tramite }}</td>
            <td *ngIf="!editCache[item.id]?.edit">{{ item.solicita }}</td>
            <td *ngIf="!editCache[item.id]?.edit">{{ item.fechaSolicitud }}</td>
            <td *ngIf="!editCache[item.id]?.edit">{{ item.observaciones }}</td>

            <!-- Modo edición -->
            <td *ngIf="editCache[item.id]?.edit">
                <input type="text" nz-input [(ngModel)]="editCache[item.id].data.area" />
            </td>
            <td *ngIf="editCache[item.id]?.edit">
                <input type="text" nz-input [(ngModel)]="editCache[item.id].data.juzgado" />
            </td>
            <td *ngIf="editCache[item.id]?.edit">
                <input type="text" nz-input [(ngModel)]="editCache[item.id].data.piso" />
            </td>
            <td *ngIf="editCache[item.id]?.edit">
                <input type="text" nz-input [(ngModel)]="editCache[item.id].data.tramite" />
            </td>
            <td *ngIf="editCache[item.id]?.edit">
                <input type="text" nz-input [(ngModel)]="editCache[item.id].data.solicita" />
            </td>
            <td *ngIf="editCache[item.id]?.edit">
                <input type="date" nz-input [(ngModel)]="editCache[item.id].data.fechaSolicitud" />
            </td>
            <td *ngIf="editCache[item.id]?.edit">
                <input type="text" nz-input [(ngModel)]="editCache[item.id].data.observaciones" />
            </td>

            <!-- Acciones -->
            <td>
                <ng-container *ngIf="!editCache[item.id]?.edit">
                    <button nz-button nzType="link" (click)="startEdit(item.id)">Editar</button>
                </ng-container>
                <ng-container *ngIf="editCache[item.id]?.edit">
                    <button nz-button nzType="primary" (click)="saveEdit(item.id)">Guardar</button>
                    <button nz-button nzType="default" nz-popconfirm nzPopconfirmTitle="¿Seguro que quieres cancelar?" 
                            (nzOnConfirm)="cancelEdit(item.id)">Cancelar</button>
                </ng-container>
            </td>
        </tr>
    </tbody>
</nz-table>
